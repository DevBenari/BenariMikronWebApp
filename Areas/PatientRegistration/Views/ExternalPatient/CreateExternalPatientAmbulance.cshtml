@{
    ViewData["Title"] = "Tambah Pasien Ambulance";
    Layout = "~/Views/Shared/_TopNavbarPatientRegistration.cshtml";
}

@model CreateExternalPatientAmbulanceViewModel

<!-- Main content -->
<section class="content">
    <div class="row">
        <!-- left column -->
        <div class="col-md-12 bg-white">
            <div class="card-header bg-orange">
                <h3 class="card-title fw-bold" style="color:#ffffff">@ViewBag.Title</h3>
            </div>

            <form enctype="multipart/form-data" asp-controller="ExternalPatient" asp-action="CreateExternalPatientAmbulance" method="post" class="form-horizontal">
                <div class="card-body">
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="KodePasien">Kode Pasien</label>
                        <div class="col-sm-9">
                            <input type="text" asp-for="KodePasien" class="form-control form-control-border border-width-2" placeholder="Nomor Pasien Baru" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="NomorRekamMedisBaru">No. Rekam Medis Baru</label>
                        <div class="col-sm-9">
                            <input type="text" asp-for="NomorRekamMedisBaru" class="form-control form-control-border border-width-2" placeholder="Nomor Rekam Medis Baru" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="NomorRekamMedisLama">No. Rekam Medis Sebelumnya</label>
                        <div class="col-sm-9">
                            <input maxlength="100" autofocus autocomplete="off" asp-for="NomorRekamMedisLama" type="text" class="form-control form-control-border border-width-2" placeholder="Nomor Rekam Medis Sebelumnya">
                        </div>
                    </div>                    
                </div>                
                <!-- data identitas elements -->
                <div class="card card-orange">
                    <div class="card-header">
                        <h3 class="card-title fw-bold" style="color:#ffffff">Data Identitas Pasien</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Title">Title (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Title" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Title--</option>
                                    <option value="Tn.">Tn.</option>
                                    <option value="Ny.">Ny.</option>
                                    <option value="Nn.">Nn.</option>
                                    <option value="An.">An.</option>
                                    <option value="By.">By.</option>
                                    <option value="Sdr.">Sdr.</option>
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Miss.">Miss.</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NamaPasien">Nama Pasien Sesuai Identitas (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" type="text" asp-for="NamaPasien" class="form-control form-control-border border-width-2" id="" placeholder="Nama Pasien Sesuai Identitas">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NomorIdentitasPasien">No. KTP / SIM / Passport / KITAS (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" type="text" asp-for="NomorIdentitasPasien" class="form-control form-control-border border-width-2" id="" placeholder="Nomor Identitas Pasien">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TempatLahir">Tempat Lahir (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" type="text" asp-for="TempatLahir" class="form-control form-control-border border-width-2" id="" placeholder="Tempat Lahir">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TanggalLahir">Tanggal Lahir (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" type="date" asp-for="TanggalLahir" class="form-control form-control-border border-width-2" id="" placeholder="Tanggal Lahir">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="JenisKelamin">Jenis Kelamin (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="JenisKelamin" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Jenis Kelamin--</option>
                                    <option value="Laki-Laki">Laki-Laki</option>
                                    <option value="Perempuan">Perempuan</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="AlamatLengkap">Alamat Lengkap (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="255" autofocus autocomplete="off" asp-for="AlamatLengkap" type="text" class="form-control form-control-border border-width-2" placeholder="Alamat Lengkap">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="CountryId" class="col-sm-3 col-form-label">Negara (*)</label>
                            <div class="col-sm-9">
                                <select id="CountryList" asp-for="CountryId" asp-items="@ViewBag.Country" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Negara--</option>
                                </select>
                                <span asp-validation-for="CountryId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="ProvinceId" class="col-sm-3 col-form-label">Provinsi (*)</label>
                            <div class="col-sm-9">
                                <select id="ProvinceList" asp-for="ProvinceId" asp-items="@ViewBag.Province" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Provinsi--</option>
                                </select>
                                <span asp-validation-for="ProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="CityId" class="col-sm-3 col-form-label">Kota (*)</label>
                            <div class="col-sm-9">
                                <select id="CityList" asp-for="CityId" asp-items="@ViewBag.City" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kota--</option>
                                </select>
                                <span asp-validation-for="CityId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="DistrictId" class="col-sm-3 col-form-label">Kecamatan (*)</label>
                            <div class="col-sm-9">
                                <select id="DistrictList" asp-for="DistrictId" asp-items="@ViewBag.District" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kecamatan--</option>
                                </select>
                                <span asp-validation-for="DistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="SubDistrictId" class="col-sm-3 col-form-label">Kelurahan (*)</label>
                            <div class="col-sm-9">
                                <select id="SubDistrictList" asp-for="SubDistrictId" asp-items="@ViewBag.SubDistrict" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kelurahan--</option>
                                </select>
                                <span asp-validation-for="SubDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="KodePos">Kode Pos</label>
                            <div class="col-sm-9">
                                <input maxlength="20" autofocus autocomplete="off" asp-for="KodePos" type="text" class="form-control form-control-border border-width-2" placeholder="Kode Pos">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NomorTelepon">No. Telepon (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" asp-for="NomorTelepon" type="text" class="form-control form-control-border border-width-2" placeholder="Nomor Telepon">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="EmailAktif">Email Aktif (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" asp-for="EmailAktif" type="text" class="form-control form-control-border border-width-2" placeholder="Email Aktif">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Department">Departemen (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Department" id="" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Departemen--</option>
                                    <option value="Konsul">Konsul</option>                                    
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Komponen">Komponen (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Komponen" id="" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Komponen--</option>
                                    <option value="Konsul">Konsul</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="DaerahTujuan">Daerah Tujuan (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="DaerahTujuan" id="" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Daerah Tujuan--</option>
                                    <option value="Konsul">Konsul</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="KelebihanJarak">Kelebihan Jarak</label>
                            <div class="col-sm-9">
                                <input maxlength="20" autofocus autocomplete="off" asp-for="KelebihanJarak" type="text" class="form-control form-control-border border-width-2" placeholder="Kelebihan Jarak">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="KelebihanWaktu">Kelebihan Waktu</label>
                            <div class="col-sm-9">
                                <input maxlength="20" autofocus autocomplete="off" asp-for="KelebihanWaktu" type="text" class="form-control form-control-border border-width-2" placeholder="Kelebihan Waktu">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Paramedis">Paramedis (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Paramedis" id="" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Paramedis--</option>
                                    <option value="Konsul">Konsul</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="AntarJemput">AntarJemput (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="AntarJemput" id="" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Antar Jemput--</option>
                                    <option value="Konsul">Konsul</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Catatan">Catatan</label>
                            <div class="col-sm-9">
                                <input maxlength="20" autofocus autocomplete="off" asp-for="Catatan" type="text" class="form-control form-control-border border-width-2" placeholder="Catatan">
                            </div>
                        </div>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.end data identitas -->
                <!-- start button footer -->
                <div class="card card-orange">
                    <div class="card-body">
                        <button type="submit" class="btn btn-primary bg-orange float-left fw-bold"><div style="color:#ffffff">Simpan</div></button>
                        <a class="btn btn-default" asp-action="PatientAmbulance" asp-controller="ExternalPatient" asp-area="PatientRegistration">Batal</a>
                    </div>
                </div>
                <!-- /.end button footer -->
                @section Scripts {
                    <script>
                        $(function () {
                            //Initialize Select2 Elements
                            $('.select2bs4').select2({
                                theme: 'bootstrap4'
                            })
                        })
                    </script>

                    <script>
                        $("#GrupAsuransi").hide();

                        $("#MenuTipePasien").change(function () {
                            if ($(this).val() == "Asuransi") {
                                $("#GrupAsuransi").show();
                            }
                            else {
                                $("#GrupAsuransi").hide();
                            }

                            if ($(this).val() == "Umum") {
                                $('#listAsuransi').select2('val', 'selectedIndex', 0);
                                $("#listAsuransi").data('placeholder');
                            }
                        });
                    </script>

                    <script>
                        $("#GrupDeskripsiRujukan").hide();
                        $("#MenuKonsul").hide();
                        $("#MenuLuarRs").hide();
                        $("#MenuAps").hide();

                        $("#MenuTipeRujukan").on("change", function () {
                            $("#GrupDeskripsiRujukan").show();
                            if ($(this).val() == "Konsul")
                                $("#MenuKonsul").show();
                            else
                                $("#MenuKonsul").hide();

                            if ($(this).val() == "Luar Rs")
                                $("#MenuLuarRs").show();
                            else
                                $("#MenuLuarRs").hide();

                            if ($(this).val() == "Atas Permintaan Sendiri")
                                $("#MenuAps").show();
                            else
                                $("#MenuAps").hide();

                        });
                    </script>

                    <script>
                        $(document).ready(function () {
                            $("#ProvinceList").empty().append('<option value = "' + -1 + '">' + "--Pilih Provinsi--" + '</option>');
                            $("#CityList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kota--" + '</option>');
                            $("#DistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                            $("#SubDistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');

                            $("#CountryList").change(function () {
                                $("#ProvinceList").empty();
                                $("#CityList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kota--" + '</option>');
                                $("#DistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                                $("#SubDistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadProvince")',
                                    dataType: 'json',
                                    data: { id: $("#CountryList").val() },
                                    success: function (provinces) {
                                        $("#ProvinceList").append('<option value = "' + -1 + '">' + "--Pilih Provinsi--" + '</option>');
                                        $.each(provinces, function (i, province) {
                                            $("#ProvinceList").append('<option value = "' + province.value + '">' + province.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data provinsi' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#ProvinceList").change(function () {
                                $("#CityList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadCity")',
                                    dataType: 'json',
                                    data: { id: $("#ProvinceList").val() },
                                    success: function (cities) {
                                        $("#CityList").append('<option value="' + -1 + '">' + "--Pilih Kota--" + '</option>');
                                        $.each(cities, function (i, city) {
                                            $("#CityList").append('<option value="' + city.value + '">' + city.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kota' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#CityList").change(function () {
                                $("#DistrictList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadDistrict")',
                                    dataType: 'json',
                                    data: { id: $("#CityList").val() },
                                    success: function (districts) {
                                        $("#DistrictList").append('<option value="' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                                        $.each(districts, function (i, district) {
                                            $("#DistrictList").append('<option value="' + district.value + '">' + district.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kecamatan' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#DistrictList").change(function () {
                                $("#SubDistrictList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadSubDistrict")',
                                    dataType: 'json',
                                    data: { id: $("#DistrictList").val() },
                                    success: function (subdistricts) {
                                        $("#SubDistrictList").append('<option value="' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');
                                        $.each(subdistricts, function (i, subdistrict) {
                                            $("#SubDistrictList").append('<option value="' + subdistrict.value + '">' + subdistrict.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kelurahan' + ex);
                                    }
                                });
                                return false;
                            })
                        })
                    </script>
                }
            </form>
        </div>
        <!--/.col (left) -->
    </div>
</section>
<!-- /.content -->