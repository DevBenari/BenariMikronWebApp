@{
    ViewData["Title"] = "Tambah Pasien Laboratorium";
    Layout = "~/Views/Shared/_TopNavbarPatientRegistration.cshtml";
}

@model CreateExternalPatientLaboratoriumViewModel

<!-- Main content -->
<section class="content">
    <div class="row">        
        <div class="col-md-12 bg-white">
            <div class="card-header bg-orange">
                <h3 class="card-title fw-bold" style="color:#ffffff">@ViewBag.Title</h3>
            </div>

            <form enctype="multipart/form-data" asp-controller="ExternalPatient" asp-action="CreateExternalPatientLaboratorium" method="post" class="form-horizontal">
                <div class="card-body">
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="KodePasien">Kode Pasien</label>
                        <div class="col-sm-9">
                            <input type="text" asp-for="KodePasien" class="form-control form-control-border border-width-2" placeholder="Nomor Pasien Baru" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="NomorRekamMedisBaru">No. Rekam Medis Baru</label>
                        <div class="col-sm-9">
                            <input type="text" asp-for="NomorRekamMedisBaru" class="form-control form-control-border border-width-2" placeholder="Nomor Rekam Medis Baru" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="NomorRekamMedisLama">No. Rekam Medis Sebelumnya</label>
                        <div class="col-sm-9">
                            <input maxlength="100" autofocus autocomplete="off" asp-for="NomorRekamMedisLama" type="text" class="form-control form-control-border border-width-2" placeholder="Nomor Rekam Medis Sebelumnya">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label" asp-for="TipePasien">Tipe Pasien (*)</label>
                        <div class="col-sm-9">
                            <select asp-for="TipePasien" id="MenuTipePasien" class="form-control select2bs4" style="width: 100%;">
                                <option value="" hidden disabled selected>--Pilih Tipe Pasien--</option>
                                <option value="Umum">Umum</option>
                                <option value="Asuransi">Asuransi</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- data penjamin elements -->
                <div class="card card-orange" id="GrupAsuransi">
                    <div class="card-header">
                        <h3 class="card-title fw-bold" style="color:#ffffff">Asuransi</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group row">
                            <label asp-for="InsuranceId" class="col-sm-3 col-form-label">
                                Nama Asuransi <small class="badge bg-orange" id="toolAsuransi"
                                                     data-toggle="tooltip"
                                                     data-placement="top"
                                                     title="Data : Administrasi > Master Data > Asuransi"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="listAsuransi" data-placeholder="--Pilih Asuransi--" asp-for="InsuranceId" asp-items="@ViewBag.Insurance" class="asuransi form-control select2bs4" style="width: 100%;">
                                    <option value=""></option>
                                </select>
                                <span asp-validation-for="InsuranceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NomorPolis">Nomor Polis</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" type="text" asp-for="NomorPolis" class="form-control form-control-border border-width-2" id="" placeholder="Nomor Polis">
                            </div>
                        </div>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.end data penjamin -->
                <!-- data identitas elements -->
                <div class="card card-orange">
                    <div class="card-header">
                        <h3 class="card-title fw-bold" style="color:#ffffff">Data Identitas Pasien</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Title">Title (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Title" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Title--</option>
                                    <option value="Tn.">Tn.</option>
                                    <option value="Ny.">Ny.</option>
                                    <option value="Nn.">Nn.</option>
                                    <option value="An.">An.</option>
                                    <option value="By.">By.</option>
                                    <option value="Sdr.">Sdr.</option>
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Miss.">Miss.</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NamaPasien">Nama Pasien Sesuai Identitas (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" type="text" asp-for="NamaPasien" class="form-control form-control-border border-width-2" id="" placeholder="Nama Pasien Sesuai Identitas">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NomorIdentitasPasien">No. KTP / SIM / Passport / KITAS (*)</label>
                            <div class="col-sm-9 input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-id-badge"></i></span>
                                </div>
                                <input asp-for="NomorIdentitasPasien" type="text" class="form-control form-control-border border-width-2" autofocus autocomplete="off" placeholder="No. KTP / SIM / Passport / KITAS" data-inputmask='"mask": "9999999999999999"' data-mask-ktp>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TempatLahir">
                                Tempat Lahir <small class="badge bg-orange" id="toolTempatLahir"
                                                    data-toggle="tooltip"
                                                    data-placement="top"
                                                    title="Data : Administrasi > Master Data > Kelengk. Alamat > Kota"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select asp-for="TempatLahir" asp-items="@ViewBag.City" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kota--</option>
                                </select>
                                <span asp-validation-for="TempatLahir" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TanggalLahir">Tanggal Lahir</label>
                            <div class="col-sm-9 input-group date" id="tanggallahir" data-target-input="nearest">
                                <div class="input-group-append" data-target="#tanggallahir" data-toggle="datetimepicker">
                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                                <input asp-for="TanggalLahir" type="text" class="form-control datetimepicker-input" data-target="#tanggallahir" placeholder="Tanggal Lahir" />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="JenisKelamin">Jenis Kelamin (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="JenisKelamin" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Jenis Kelamin--</option>
                                    <option value="Laki-Laki">Laki-Laki</option>
                                    <option value="Perempuan">Perempuan</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="AlamatLengkap">Alamat Lengkap (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="255" autofocus autocomplete="off" asp-for="AlamatLengkap" type="text" class="form-control form-control-border border-width-2" placeholder="Alamat Lengkap">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="CountryId" class="col-sm-3 col-form-label">
                                Negara (*) <small class="badge bg-orange" id="toolNegara"
                                                  data-toggle="tooltip"
                                                  data-placement="top"
                                                  title="Data : Administrasi > Master Data > Kelengk. Alamat > Negara"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="CountryList" asp-for="CountryId" asp-items="@ViewBag.Country" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Negara--</option>
                                </select>
                                <span asp-validation-for="CountryId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="ProvinceId" class="col-sm-3 col-form-label">
                                Provinsi (*) <small class="badge bg-orange" id="toolProvinsi"
                                                    data-toggle="tooltip"
                                                    data-placement="top"
                                                    title="Data : Administrasi > Master Data > Kelengk. Alamat > Provinsi"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="ProvinceList" asp-for="ProvinceId" asp-items="@ViewBag.Province" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Provinsi--</option>
                                </select>
                                <span asp-validation-for="ProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="CityId" class="col-sm-3 col-form-label">
                                Kota (*) <small class="badge bg-orange" id="toolKota"
                                                data-toggle="tooltip"
                                                data-placement="top"
                                                title="Data : Administrasi > Master Data > Kelengk. Alamat > Kota"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="CityList" asp-for="CityId" asp-items="@ViewBag.City" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kota--</option>
                                </select>
                                <span asp-validation-for="CityId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="DistrictId" class="col-sm-3 col-form-label">
                                Kecamatan (*) <small class="badge bg-orange" id="toolKecamatan"
                                                     data-toggle="tooltip"
                                                     data-placement="top"
                                                     title="Data : Administrasi > Master Data > Kelengk. Alamat > Kecamatan"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="DistrictList" asp-for="DistrictId" asp-items="@ViewBag.District" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kecamatan--</option>
                                </select>
                                <span asp-validation-for="DistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label asp-for="SubDistrictId" class="col-sm-3 col-form-label">
                                Kelurahan (*) <small class="badge bg-orange" id="toolKelurahan"
                                                     data-toggle="tooltip"
                                                     data-placement="top"
                                                     title="Data : Administrasi > Master Data > Kelengk. Alamat > Kelurahan"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select id="SubDistrictList" asp-for="SubDistrictId" asp-items="@ViewBag.SubDistrict" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Kelurahan--</option>
                                </select>
                                <span asp-validation-for="SubDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="KodePos">Kode Pos</label>
                            <div class="col-sm-9">
                                <input maxlength="20" autofocus autocomplete="off" asp-for="KodePos" type="text" class="form-control form-control-border border-width-2" placeholder="Kode Pos">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="NomorTelepon">No. Telepon (*)</label>
                            <div class="col-sm-9 input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                </div>
                                <input asp-for="NomorTelepon" type="text" class="form-control form-control-border border-width-2" data-inputmask='"mask": "(9999) - 9999-9999-9"' data-mask-telepon>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="EmailAktif">Email Aktif (*)</label>
                            <div class="col-sm-9 input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                </div>
                                <input maxlength="100" autofocus autocomplete="off" asp-for="EmailAktif" type="email" class="form-control form-control-border border-width-2" placeholder="Email Aktif">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TipeRujukan">Tipe Rujukan (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="TipeRujukan" id="MenuTipeRujukan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Tipe Rujukan--</option>
                                    <option value="Konsul">Konsul</option>
                                    <option value="Luar Rs">Luar Rs</option>
                                    <option value="Atas Permintaan Sendiri">Atas Permintaan Sendiri</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row" id="GrupDeskripsiRujukan">
                            <label class="col-sm-3 col-form-label" asp-for="DeskripsiRujukan">Deskripsi Rujukan (*)</label>
                            <div class="col-sm-9" id="MenuKonsul">
                                <select asp-for="DeskripsiRujukan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Nama Dokter--</option>
                                    <option value="Dr. Steven Frainch">Dr. Steven Frainch</option>
                                </select>
                            </div>
                            @*<div class="col-sm-9" id="MenuLuarRs">
                                <select asp-for="DeskripsiRujukan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Rujukan Dari--</option>
                                    <option value="RSU/RSK/RB">RSU/RSK/RB</option>
                                    <option value="Puskesmas">Puskesmas</option>
                                    <option value="Paramedik">Paramedik</option>
                                    <option value="Dukun Terlatih">Dukun Terlatih</option>
                                    <option value="Kasus Polisi">Kasus Polisi</option>
                                    <option value="Keluarga">Keluarga</option>
                                </select>
                            </div>
                            <div class="col-sm-9" id="MenuAps">
                                <select asp-for="DeskripsiRujukan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="Atas Permintaan Sendiri">Atas Permintaan Sendiri</option>
                                </select>
                            </div>*@
                        </div>
                        <div class="form-group row">
                            <label asp-for="PromoId" class="col-sm-3 col-form-label">
                                Promo (*) <small class="badge bg-orange" id="toolPromo"
                                                     data-toggle="tooltip"
                                                     data-placement="top"
                                                     title="Data : Administrasi > Master Data > Promo"><i class="fas fa-info-circle" style="color:white"></i></small>
                            </label>
                            <div class="col-sm-9">
                                <select asp-for="PromoId" asp-items="@ViewBag.Promo" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Promo--</option>
                                </select>
                                <span asp-validation-for="PromoId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TipePemeriksaan">Tipe Pemeriksaan (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="TipePemeriksaan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Tipe Pemeriksaan--</option>
                                    <option value="Patologi Klinik">Patologi Klinik</option>
                                    <option value="Patologi Anatomi">Patologi Anatomi</option>
                                    <option value="Mikrobiologi">Mikrobiologi</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="SuratRujukan">Surat Rujukan (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="SuratRujukan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Surat Rujukan--</option>
                                    <option value="Ada">Ada</option>
                                    <option value="Tidak Ada">Tidak Ada</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="DiagnosaAwal">Diagnosa Awal (*)</label>
                            <div class="col-sm-9">
                                <input maxlength="250" autofocus autocomplete="off" asp-for="DiagnosaAwal" type="text" class="form-control form-control-border border-width-2" placeholder="Diagnosa Awal">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="TanggalSampling">Tanggal Sampling</label>
                            <div class="col-sm-9 input-group date" id="tanggalSampling" data-target-input="nearest">
                                <div class="input-group-append" data-target="#tanggalSampling" data-toggle="datetimepicker">
                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                                <input asp-for="TanggalSampling" type="text" class="form-control datetimepicker-input" data-target="#tanggalSampling" placeholder="Tanggal Sampling" />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="DetailTindakan">Detail Tindakan</label>
                            <div class="col-sm-9">
                                <input maxlength="100" autofocus autocomplete="off" asp-for="DetailTindakan" type="text" class="form-control form-control-border border-width-2" placeholder="Detail Tindakan">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="DokterPemeriksa">Dokter Pemeriksa (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="DokterPemeriksa" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Dokter Pemeriksa--</option>
                                    <option value="Tidak Ada">Tidak Ada</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label" asp-for="Pemeriksaan">Pemeriksaan (*)</label>
                            <div class="col-sm-9">
                                <select asp-for="Pemeriksaan" class="form-control select2bs4" style="width: 100%;">
                                    <option value="" hidden disabled selected>--Pilih Pemeriksaan--</option>
                                    <option value="Cito">Cito</option>
                                    <option value="Tidak">Tidak</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.end data identitas -->
                <!-- start button footer -->
                <div class="card card-orange">
                    <div class="card-body">
                        <button type="submit" class="btn btn-primary bg-orange float-left fw-bold"><div style="color:#ffffff">Simpan</div></button>
                        <a class="btn btn-default" asp-action="PatienLaboratorium" asp-controller="ExternalPatient" asp-area="PatientRegistration">Batal</a>
                    </div>
                </div>
                <!-- /.end button footer -->
                @section Scripts {
                    <script>
                        $(function () {
                            //Initialize Select2 Elements
                            $('.select2bs4').select2({
                                theme: 'bootstrap4'
                            })
                            $('#toolAsuransi').tooltip({ animation: true });
                            $('#toolTempatLahir').tooltip({ animation: true });
                            $('#toolNegara').tooltip({ animation: true });
                            $('#toolProvinsi').tooltip({ animation: true });
                            $('#toolKota').tooltip({ animation: true });
                            $('#toolKecamatan').tooltip({ animation: true });
                            $('#toolKelurahan').tooltip({ animation: true });
                            $('#toolPromo').tooltip({ animation: true });
                        })
                    </script>

                    <script>
                        $(function () {
                            //Date picker
                            $('#tanggallahir').datetimepicker({
                                format: 'L'
                            })

                            $('#tanggalSampling').datetimepicker({
                                format: 'L'
                            })

                            //Data-Mask-Ktp
                            $('[data-mask-ktp]').inputmask()

                            //Data-Mask-Telepon
                            $('[data-mask-telepon]').inputmask()
                        })
                    </script>

                    <script>
                        $("#GrupAsuransi").hide();

                        $("#MenuTipePasien").change(function () {
                            if ($(this).val() == "Asuransi")
                            {
                                $("#GrupAsuransi").show();
                            }                                
                            else {
                                $("#GrupAsuransi").hide();
                            }

                            if ($(this).val() == "Umum") {
                                $('#listAsuransi').select2('val', 'selectedIndex', 0);
                                $("#listAsuransi").data('placeholder');                               
                            }                                
                        });
                    </script>

                    <script>
                        $("#GrupDeskripsiRujukan").hide();
                        $("#MenuKonsul").hide();
                        $("#MenuLuarRs").hide();
                        $("#MenuAps").hide();

                        $("#MenuTipeRujukan").on("change", function () {
                            $("#GrupDeskripsiRujukan").show();
                            if ($(this).val() == "Konsul")
                                $("#MenuKonsul").show();
                            else
                                $("#MenuKonsul").hide();

                            if ($(this).val() == "Luar Rs")
                                $("#MenuLuarRs").show();
                            else
                                $("#MenuLuarRs").hide();

                            if ($(this).val() == "Atas Permintaan Sendiri")
                                $("#MenuAps").show();
                            else
                                $("#MenuAps").hide();

                        });                        
                    </script>

                    <script>
                        $(document).ready(function() {
                            $("#ProvinceList").empty().append('<option value = "' + -1 + '">' + "--Pilih Provinsi--" + '</option>');
                            $("#CityList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kota--" + '</option>');
                            $("#DistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                            $("#SubDistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');

                            $("#CountryList").change(function () {
                                $("#ProvinceList").empty();
                                $("#CityList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kota--" + '</option>');
                                $("#DistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                                $("#SubDistrictList").empty().append('<option value = "' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');
                                $.ajax ({
                                    type: 'GET',
                                    url: '@Url.Action("LoadProvince")',
                                    dataType: 'json',
                                    data: {id: $("#CountryList").val() },
                                    success: function (provinces) {
                                        $("#ProvinceList").append('<option value = "' + -1 + '">' + "--Pilih Provinsi--" + '</option>');
                                        $.each(provinces, function (i, province) {
                                            $("#ProvinceList").append('<option value = "'+ province.value +'">' + province.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data provinsi' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#ProvinceList").change(function () {
                                $("#CityList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadCity")',
                                    dataType: 'json',
                                    data: { id: $("#ProvinceList").val() },
                                    success: function (cities) {
                                        $("#CityList").append('<option value="' + -1 + '">' + "--Pilih Kota--" + '</option>');
                                        $.each(cities, function (i, city) {
                                            $("#CityList").append('<option value="' + city.value + '">' + city.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kota' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#CityList").change(function () {
                                $("#DistrictList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadDistrict")',
                                    dataType: 'json',
                                    data: { id: $("#CityList").val() },
                                    success: function (districts) {
                                        $("#DistrictList").append('<option value="' + -1 + '">' + "--Pilih Kecamatan--" + '</option>');
                                        $.each(districts, function (i, district) {
                                            $("#DistrictList").append('<option value="' + district.value + '">' + district.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kecamatan' + ex);
                                    }
                                });
                                return false;
                            })

                            $("#DistrictList").change(function () {
                                $("#SubDistrictList").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: '@Url.Action("LoadSubDistrict")',
                                    dataType: 'json',
                                    data: { id: $("#DistrictList").val() },
                                    success: function (subdistricts) {
                                        $("#SubDistrictList").append('<option value="' + -1 + '">' + "--Pilih Kelurahan--" + '</option>');
                                        $.each(subdistricts, function (i, subdistrict) {
                                            $("#SubDistrictList").append('<option value="' + subdistrict.value + '">' + subdistrict.text + '</option>');
                                        });
                                    },
                                    error: function (ex) {
                                        alert('Gagal ambil data kelurahan' + ex);
                                    }
                                });
                                return false;
                            })
                        })
                    </script>
                }
            </form>
        </div>        
    </div>
</section>
<!-- /.content -->